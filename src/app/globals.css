@import "tailwindcss";

:root {
  --background: #fdfaf3;
  /* 米色纸张感 */
  --foreground: #4a3e3e;
  /* 深古铜色文字 */
  --accent: #d4a373;
  /* 温暖的金棕色 */
  --home-glow: #ff7b54;
  /* 清迈中心的暖橘光 */
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

body {
  background-color: var(--background);
  color: var(--foreground);
  font-family: "Inter", system-ui, -apple-system, sans-serif;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

/* NOTE: paper-texture 已移除 — 全屏外部纹理层（z-index:9999 + 远程 PNG）是 GPU 最大开销源 */

.map-container {
  width: 100vw;
  height: 100vh;
  position: absolute;
  top: 0;
  left: 0;
}

/* 连线脉冲动画 — 仅桌面端启用，使用 GPU 加速 */
.connection-line {
  animation: none;
}

@keyframes dash-flow {
  to {
    stroke-dashoffset: -30;
  }
}

/* 仅在大屏幕设备上启用连线动画 */
@media (min-width: 769px) and (prefers-reduced-motion: no-preference) {
  .connection-line {
    animation: dash-flow 3s linear infinite;
    will-change: stroke-dashoffset;
  }
}

/* 成员图标样式 — 使用 GPU 加速的 transform */
.custom-member-icon {
  transition: transform 0.2s ease;
  will-change: transform;
}

.custom-member-icon:hover {
  transform: scale(1.15);
  z-index: 1000 !important;
}

/* 家中心图标呼吸动效 — 仅桌面端 */
.custom-home-icon {
  animation: none;
}

@media (min-width: 769px) and (prefers-reduced-motion: no-preference) {
  .custom-home-icon {
    animation: home-breathe 3s ease-in-out infinite;
    will-change: transform;
  }
}

@keyframes home-breathe {

  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.05);
  }
}

/* ============================================ */
/* 移动端性能优化：替换 backdrop-blur 为纯色背景 */
/* ============================================ */

/* 模态框背景层 — 移动端用纯色替代模糊 */
.modal-backdrop {
  background-color: rgba(0, 0, 0, 0.5);
}

/* 仅桌面端使用 backdrop-blur */
@media (min-width: 769px) {
  .modal-backdrop {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }
}

/* 浮动 UI 元素 — 移动端用纯色替代模糊 */
.glass-card {
  background-color: rgba(253, 250, 243, 0.95);
}

@media (min-width: 769px) {
  .glass-card {
    background-color: rgba(253, 250, 243, 0.9);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
}

/* 侧边栏背景 — 移动端纯色 */
.sidebar-backdrop {
  background-color: rgba(0, 0, 0, 0.3);
}

@media (min-width: 769px) {
  .sidebar-backdrop {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }
}

.sidebar-panel {
  background-color: rgba(253, 250, 243, 0.98);
}

@media (min-width: 769px) {
  .sidebar-panel {
    background-color: rgba(253, 250, 243, 0.95);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
}

/* 尊重系统级 "减少动画" 偏好 */
@media (prefers-reduced-motion: reduce) {
  .connection-line {
    animation: none !important;
  }

  .custom-home-icon {
    animation: none !important;
  }
}